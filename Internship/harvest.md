[toc]



#### 1、全身出境

**问题描述：旧的全身出境算法出现仅包含上半身的切片视频。**

**解决方案：**

1. 用YOLO检测获得17个关键点，在关键点与人体关节之间建立关联。
2. 预先设置必需的肢体关键点（头部和身体部分）、关节点的最低置信度阈值，过滤掉不符合阈值的关键点。
3. 预防侧身和背身的情况，符合要求的头部关键点数量仅要求大于1，身体部分关键点个数必需符合要求。

#### 2、镜头切换

**问题描述：切片视频出现转场导致动作不连续。**

**解决方案：**

1. 使用OpenCV将rgb图像转为hsv图像。
2. 根据h、s、v计算出4个特征（h、s、v和图像轮廓），根据特征值计算两帧图像的差异。
3. 对大量转场场景计算并观察，设定合理的阈值参数。

#### 3、人物偏移

**问题描述：单人场景中常产生相同场景下，切换镜头角度导致人物出现明显偏移情况。**

**解决方案：**

1. 在图像上建立坐标系。
2. 与全身出境问题中相似，筛选出有效关键点。
3. 获取所有关键点坐标和置信度，并设计连接线矩阵。
4. 将所有关键点与坐标原点连接形成多个向量，计算出所有向量的长度，并根据两点的置信度计算连接线的权重。
5. 共产生三个矩阵：连接线矩阵、连接线距离矩阵、连接线权重矩阵，相乘求和得到一个距离值。
6. 两帧按照上述操作共得到两个距离值，可计算距离值之间的差异，并将其缩放到0到1之间。
7. 设定合理的阈值进行判断。

#### 4、人物比例

**问题描述：人物过小导致动作拟合算法效果差。**

**解决方案：**

1. 计算出人物候选框面积和整个画面面积。
2. 计算出比例，设计比例阈值进行判断。

#### 5、运动检测

**问题描述：过滤掉视频中人物静止的片段。**

**解决方案：**

1. 在画面中建立中心点，将关键点和中心点连接形成多个向量。
2. 计算相邻画面之间同一向量由于运动产生夹角的弧度值。
3. 设定合理的阈值进行判断。